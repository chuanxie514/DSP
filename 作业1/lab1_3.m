%根据差分方程描述的线性移不变系统，我们可以按照以下步骤进行计算并画出单位脉冲响应和单位阶跃响应：

%计算单位脉冲响应 h(n)：

%将输入信号 x(n) 设置为单位脉冲序列，即 x(n) = δ(n)。
%根据差分方程计算输出信号 y(n)。
%单位脉冲响应 h(n) 即为 y(n)。
%计算单位阶跃响应：

%将输入信号 x(n) 设置为单位阶跃序列，即 x(n) = u(n)。
%根据差分方程计算输出信号 y(n)。
%判断系统稳定性：

%若单位阶跃响应存在有界的幅值，系统是稳定的。


% 计算单位脉冲响应 h(n)
n = -20:100;
h = zeros(size(n));
h(21) = 1; % 注意此处索引为 21，对应 n = 0
for i = 22:length(n)
    h(i) = 1 - 0.9 * h(i-1) + 0.9^2 * h(i-2);
end

% 绘制单位脉冲响应
subplot(2, 1, 1);
stem(n, h, 'filled');
title('单位脉冲响应');
xlabel('n');
ylabel('h(n)');

% 计算单位阶跃响应
u = ones(size(n));
y = zeros(size(n));
for i = 1:length(n)
    if i == 1
        y(i) = u(i);
    else
        y(i) = u(i) - u(i-1) + 0.9 * y(i-1);
    end
end

% 绘制单位阶跃响应
subplot(2, 1, 2);
stem(n, y, 'filled');
title('单位阶跃响应');
xlabel('n');
ylabel('y(n)');

% 判断系统稳定性,abs(y) 可以返回 y 的每个元素的绝对值组成的数组。
%因此，max(abs(y)) 将返回 y 中绝对值最大的元素。%
% 如果该元素小于正无穷大，则说明单位阶跃响应有界，即存在一个上界，系统是稳定的；%
% 反之，如果该元素等于正无穷大，则说明单位阶跃响应无界，即不存在上界，系统是不稳定的。
isStable = max(abs(y)) < Inf;
if isStable
    fprintf('系统是稳定的。\n');
else
    fprintf('系统是不稳定的。\n');
end
